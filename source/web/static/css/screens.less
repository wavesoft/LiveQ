
// Import common functions
@import "common.less";

///////////////////////////////////////////////
// Reusable components
///////////////////////////////////////////////

@tuning-scr-c-good 		: #2ecc71;
@tuning-scr-sz-good 	: 24px;
@tuning-scr-c-average 	: #e67e22;
@tuning-scr-sz-average 	: 40px;
@tuning-scr-c-bad		: #e74c3c;
@tuning-scr-sz-bad		: 54px;

.screen {

	// ========================
	//  Tunable bubble element
	// ========================

	.tunable {

		.transition(all 0.2s);
		position: absolute;
		display: block;
		width: 110px; height: 74px;
		cursor: pointer;
		z-index: 100;

		.dial {
			.transition(all 0.2s);
			position: absolute;
			display: block;
			width: 74px; height: 74px;
			.border-radius(74px);
			background-color: #34495e;
			left: 18px;
			border-style: solid;
			border-width: 0;
			border-color: #34495e;

			input, div.title {
				.transition(all 0.2s);
				position: absolute;
				left: 10px; right: 10px;
				width: 52px;
				text-align: center;
			}

			input {
				.transition(all 0.2s);
				border: none;
				background-color: transparent;
				color: #fff;
				font-size: 1.2em;
				top: 37px;

				&:focus {
					outline: none;
				}
			}

			div.title {
				.transition(all 0.2s);
				color: #fff;
				font-size: 1.8em;
				bottom: 37px;
				font-weight: bold;
			}

		}

		a.wing {
			.transition(all 0.2s);
			.mask-image( url(../img/mask-wing.png) );
			.user-select( none );
			background-color: #2980b9;
			position: absolute;
			width: 37px; height: 53px;
			line-height: 53px;
			cursor: pointer;
			text-indent: 5px;
			font-size: 1.9em;
			color: #FFF;
			top: 10px;
			opacity: 0;

			&:hover {
				background-color: #3498db;
			}
			&:active {
				background-color: #71B7E6;
			}

			&.left {
				left: 18px;
			}

			&.right {
				left: 55px;
				.transform( rotateZ(180deg) );
			}

		}

		// ----------------------
		//  Expanded for editing
		// ----------------------

		&.expanded {
			z-index: 110;
			
			.dial {
				border-width: 10px;
				padding: -10px;
				background-color: #FFF;
				width: 54px; height: 54px;
				.border-radius(54px);

				input{
					color: #000;
					left: 0px;
					top: 14px;
					font-size: 1.5em;
				}
				div.title {
					color: #34495e;
					left: 0px;
					bottom: 27px;
					opacity: 0;
				}
			}
			a.wing {
				opacity: 1;
				&.left {
					left: 0px;
				}
				&.right {
					left: 73px;
				}
			}
		}

		// ------------------
		//  Inactive status
		// ------------------

		&.inactive {
			.transform( scale(0.5) );
			z-index: 50;
			opacity: 0.8;

			.dial {
				background-color: #7f8c8d;				
			}
			a.wing { display: none; }
			input  { cursor: pointer; }
			&:hover {
				.transform( scale(0.7) );
				opacity: 1;
				z-index: 110;
			}

		}

	}

	.line {
		width: 100px;
		height: 1;
		border-top: solid 1px #666;
	}

	// ===========================
	//  Observable bubble element
	// ===========================

	.observable {
		.transition(all 0.4s);
		color: #FFF;
		position: absolute;
		text-align: center;
		cursor: pointer;
		z-index: 100;

		&.val-bd {
			width: @tuning-scr-sz-bad;
			height: @tuning-scr-sz-bad;
			line-height: @tuning-scr-sz-bad;
			font-size: @tuning-scr-sz-bad/2;
			.border-radius(@tuning-scr-sz-bad);
			border: solid 2px;
			border-color: darken(@tuning-scr-c-bad, 10%);
			background-color: @tuning-scr-c-bad;
		}

		&.val-md {
			width: @tuning-scr-sz-average;
			height: @tuning-scr-sz-average;
			line-height: @tuning-scr-sz-average;
			font-size: @tuning-scr-sz-average/2;
			.border-radius(@tuning-scr-sz-average);
			border: solid 2px;
			border-color: darken(@tuning-scr-c-average, 10%);
			background-color: @tuning-scr-c-average;
		}

		&.val-gd {
			width: @tuning-scr-sz-good;
			height: @tuning-scr-sz-good;
			line-height: @tuning-scr-sz-good;
			font-size: @tuning-scr-sz-good/2;
			.border-radius(@tuning-scr-sz-good);
			border: solid 2px;
			border-color: darken(@tuning-scr-c-good, 10%);
			background-color: @tuning-scr-c-good;
		}

		&.inactive {

			// Scale down and put back
			z-index: 50;
			.transform( scale(0.5) );

			// Dull the colors
			&.val-bd {
				@dull-bd: hsl( hue(@tuning-scr-c-bad), saturation(@tuning-scr-c-bad)-50, lightness(@tuning-scr-c-bad)+10 );
				border-color: darken(@dull-bd, 10%);
				background-color: @dull-bd;
			}
			&.val-md {
				@dull-md: hsl( hue(@tuning-scr-c-average), saturation(@tuning-scr-c-average)-50, lightness(@tuning-scr-c-average)+10 );
				border-color: darken(@dull-md, 10%);
				background-color: @dull-md;
			}
			&.val-gd {
				@dull-gd: hsl( hue(@tuning-scr-c-good), saturation(@tuning-scr-c-good)-50, lightness(@tuning-scr-c-good)+10 );
				border-color: darken(@dull-gd, 10%);
				background-color: @dull-gd;
			}

		}

		&:hover {
			z-index: 110;

			&.inactive {
				opacity: 1;
				.transform( scale(1) );
			}
		}

	}

	// Ovservable indicator
	.indicator {
		position: absolute;
		width: 0;  height: 0; 
		border-left: 10px solid transparent;
		border-right: 10px solid transparent;
		z-index: 80;
		&.val-gd {
			border-top: 10px solid @tuning-scr-c-good;
		}
		&.val-md {
			border-top: 10px solid @tuning-scr-c-average;
		}
		&.val-bd {
			border-top: 10px solid @tuning-scr-c-bad;			
		}
	}

}

.screen .pagepart {
	background-image: url(../img/pageparts.png);
	background-repeat: no-repeat;
	position: absolute;

	h1 {
		font-size: 30px;
		margin: 0; padding: 0;
		position: absolute;
	}
	p {
		font-size: 14px;
		margin: 0; padding: 0;
		position: absolute;
	}

	&.tune-tl {
		background-position: -435px 0px;
		width: 295px; height: 145px;
		top: 0; left: 0;

		h1, p {
			color: #FFF;
			text-align: left;
		}
		h1 {
			width: 280px; line-height: 32px;
			left: 7px; top: 7px;
			font-size: 25px;
		}
		p {
			width: 280px; line-height: 18px;
			left: 7px; top: 35px;
		}

	}

	&.run-tl {
		background-position: 0px 0px;
		width: 145px; height: 145px;
		top: 0; left: 0;

		h1, p {
			color: #FFF;
			text-align: left;
		}
		h1 {
			width: 130px; line-height: 52px;
			left: 7px; top: 7px;
		}
		p {
			width: 59px; line-height: 18px;
			left: 7px; top: 59px;
		}
	}

	&.run-tr {
		background-position: -145px 0px;
		width: 145px; height: 145px;
		top: 0; right: 0;

		h1, p {
			color: #FFF;
			text-align: right;
		}
		h1 {
			width: 130px; line-height: 52px;
			right: 7px; top: 7px;
		}
		p {
			width: 59px; line-height: 18px;
			right: 7px; top: 59px;
		}

	}

	&.run-bl {
		background-position: -290px 0px;
		width: 145px; height: 145px;
		bottom: 0; left: 0;

		h1, p {
			color: #FFF;
			text-align: left;
		}
		h1 {
			width: 130px; line-height: 52px;
			left: 7px; bottom: 7px;
		}
		p {
			width: 59px; line-height: 18px;
			left: 7px; bottom: 59px;
		}
	}

}

///////////////////////////////////////////////
// Tuning Screen
///////////////////////////////////////////////

@tune-details-height: 150px;

.screen.tuning {

	a { text-decoration: none; }

	.tuning-host {
		position: absolute;
	}

	.tune-tl {
		z-index: 200;
		.pointer-events( none );

		.btn-taglike {
			.transition( all 0.5s );
			.pointer-events( auto );
			.border-radius( 0px 0px 8px 8px );
			cursor: pointer;
			background-color: #16a085;
			left: 0; top: 145px;
			position: absolute;
			text-align: center;
			color: #FFF;
			width: 70px;
			height: 45px;
			padding-top: 5px;

			&:hover {
				padding-top: 15px;
			}
		}

	}

	//
	// The expanded details view
	// ==========================
	//
	.details-view {
		.transition( all 0.5s );
		z-index: 100;
		background-color: #FFF;
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		height: 0;

		&.expanded {
			height: @tune-details-height;
		}

		div.scroller {
			border-top: solid 4px #16a085;
			background-color: #4d4d4d;
			width: 100%;
			height: @tune-details-height;
		}

		div.btn-taglike {
			.transition( all 0.5s );
			.pointer-events( auto );
			.border-radius( 8px 8px 0px 0px );
			cursor: pointer;
			background-color: #16a085;
			left: 0; top: -50px;
			position: absolute;
			text-align: center;
			color: #FFF;
			width: 70px;
			height: 45px;
			padding-top: 5px;

			&:hover {
				top: -60px;
				padding-bottom: 10px;
			}

		}
	}

	//
	// The big centeral widget 
	// ==========================
	//
	.progress-widget {

		.transition(all 0.4s);
		.border-radius(160px);
		position: absolute;
		display: block;
		width: 156px; height: 156px;
		background-color: #FFF;
		border: solid 2px #34495e;

		div.title, div.subtitle {
			color: #2c3e50;
			position: absolute;
			text-align: center;
			left: 40px; right: 40px;
		}

		div.title {
			font-weight: 600;
			font-size: 2.2em;
			bottom: 70px;
		}

		div.subtitle {
			font-size: 1.3em;
			top: 80px;
		}

		div.knob {
			position: absolute;
			left: 4px; top: 4px;

			input {
				display: none;
			}
		}

		a.button {
			.transition(all 0.4s);

			position: absolute;
			display: block;

			//background: url(../img/tune-icons.png) no-repeat -37px 0px;
			line-height: 50px;
			overflow: hidden;

			background: #ecf0f1;
			color: #c0392b;

			.mask-image( url(../img/mask-tune.png) );
			width: 108px; height: 50px;

			text-align: center;
			font-size: 17px;
			left: 24px;
			top: 106px;
			cursor: not-allowed;

			&.active {
				cursor: pointer;
				top: 123px;
				background: #27ae60;
				color: #FFF;
				&:hover {
					background: #2ecc71;
				}
			}

		}

		div.c-marker {
			position: absolute;
			border: dashed 1px #999;
		}

	}

}

///////////////////////////////////////////////
// Home Screen
///////////////////////////////////////////////

.screen.home {

	.home-menu {
		position: absolute;
		display: block;
		width: 400px;
		height: 400px;

		a.btn {
			display: block;
			width: 100%;
			height: 32px;
			margin: 5px 0;
			background-color: #3399FF;
			line-height: 32px;
			text-indent: 10px;
			font-size: 1.2em;
			color: #fff;
			text-decoration: none;

			&:hover {
				background-color: #70B8FF;
			}
		}
	}

}

///////////////////////////////////////////////
// Explaination Screen
///////////////////////////////////////////////

// Definitions for explain screen
@game-scr-nav-iconset-size   : 64px;
@game-scr-nav-iconset-a-size : 42px;
@game-scr-nav-iconset-border : 3px;
@game-scr-parameter-size	 : 40px;
@game-scr-parameter-color	 : #2980b9;
@game-scr-parameter-hover-c	 : #3498db;

.screen.explain {
	padding: 0;

	.explain-book {

		background-color: #3498db;
		position: absolute;
		left: 15%;
		right: 15%;
		top: 10%;
		bottom: 10%;

		// Animation for visibility
		.easing-back-in();
		.transform( scale(0.1) );
		opacity: 0;

		&.visible {
			z-index: 500;
			opacity: 1;
			.transform( scale(1) );
			.easing-back-out( );
		}

		// Colors applied both on body and on tab icons
		&.learn, .learn {
			background-color: #3498db;
		}
		&.understand, .understand {
			background-color: #8e44ad;
		}
		&.research, .research {
			background-color: #16a085;
		}

		// Title and close icon
		div.header {
			position: absolute;
			left: 0; width: 100%; top: 0;
			height: 24px;
			background-color: rgba(0,0,0,0.4);

			&>span.bullet {
				.border-radius( 8px );
				display: inline-block;
				width: 10px;
				height: 10px;
				background: #f1c40f;
				margin-left: 6px;
			}

			&>span.title {
				color: #fff;
				font-size: 14px;
				line-height: 24px;
				margin-left: 4px;
			}

			a.close {
				width: 24px;
				height: 24px;
				display: block;
				position: absolute;
				right: 0; top: 0;
				line-height: 24px;
				text-align: center;
			}

		}

		// Main body
		div.body {
			position: absolute;
			left: 0; width: 100%;
			top: 24px; bottom: 24px;
			overflow-x: hidden;
			overflow-y: auto;

		}

		// footer with tab icons
		div.footer {
			background-color: #2c3e50;
			position: absolute;
			left: 0; width: 100%; bottom: 0;
			height: 24px;
			overflow-x: hidden;

			a {
				display: inline-block;
				width: 100px;
				padding: 2px;
				height: 20px;
				color: #fff;
				text-decoration: none;
			}

		}

	}

	.explain-top {
		height: 65%;
		margin: 0;

		.parameter {

			.transition(all 0.4s);
			position: absolute;
			display: block;
			width: @game-scr-parameter-size;
			height: @game-scr-parameter-size;
			.border-radius( @game-scr-parameter-size );
			background-color: @game-scr-parameter-color;
			cursor: pointer;

			&:after {
				content: " ";
				display: block;
				position: absolute;
				left: -8px; top: -8px;
				width: @game-scr-parameter-size + 8px;
				height: @game-scr-parameter-size + 8px;
				border: solid 4px;
				border-color: @game-scr-parameter-color;
				.border-radius( @game-scr-parameter-size + 8px );

				opacity: 0;
				.transform( scale(0.1) );
				.easing-back-in( );
			}

			h1 {
				margin: 0;
				padding: 0;
				font-size: 1.4em;
				width: @game-scr-parameter-size;
				line-height: @game-scr-parameter-size;
				text-align: center;
				color: #fff;
			}

			div.title {
				display: none;

				.arrow_box {
					position: relative;
					background-color: @game-scr-parameter-color;
				}
				.arrow_box:after {
					top: 50%;
					border: solid transparent;
					content: " ";
					height: 0;
					width: 0;
					position: absolute;
					pointer-events: none;
					border-color: rgba(0, 0, 0, 0);
					border-width: 30px;
					margin-top: -30px;
				}

				&.left {
					right: 100%;
					border-right-color: @game-scr-parameter-color;
				}
				&.right {
					left: 100%;
					border-left-color: @game-scr-parameter-color;
				}

			}

			&:hover {

				background-color: @game-scr-parameter-hover-c;

				&:after {
					opacity: 1.0;
					border-color: @game-scr-parameter-hover-c;
					.transform( scale(1.0) );
					.easing-back-out( );
				}

			}

		}

	}

	.explain-bottom {
		height: 35%;
		margin: 0;

		&.machine-diagram {
			background-color: #e74c3c;
			overflow: hidden;

			.icons {
				position: relative;
				.transition( ~"top 0.4s, left 0.4s" );

				.focus-bar {
					position: absolute;
					background-color: #F1948A;
					left: 0; top: 0;
					.transition( ~"top 0.2s linear, left 0.2s linear" );
				}

				.line {
					border-width: 0;
					border-style: solid;
					border-color: #c0392b;
					position: absolute;
					.transition( ~"top 0.2s linear, left 0.2s linear" );

					&.pos-straight {
						border-width: 0 0 4px 0;
					}
					&.pos-branch {
						border-width: 4px 0 0 4px;
						border-radius: 10px 0 0 0;
						&.pos-down {
							border-width: 0 0 4px 4px;
							border-radius: 0 0 0 10px;
						}
					}
					&.pos-collapse {
						border-width: 0 4px 4px 0;
						border-radius: 0 0 10px 0;
						&.pos-down {
							border-radius: 0 10px 0  0;
							border-width: 4px 4px 0 0;
						}
					}
					&.dashed {
						border-style: dashed;
					}
				}

				.icon {
					display: inline-block;
					width: @game-scr-nav-iconset-size;
					position: absolute;
					.transition( all 0.2s linear );

					&>div {
						margin-top: 5px;
						text-align: center;
						color: #c0392b;
					}

					&>a {
						width: @game-scr-nav-iconset-a-size; 
						height: @game-scr-nav-iconset-a-size;
						display: block;
						margin: 0 auto;

						background-image: url(../img/iconsets.png);
						background-repeat: no-repeat;
						background-position-x: 0;
						background-position-y: -@game-scr-nav-iconset-a-size;

						border-style: solid;
						border-color: transparent;
						border-width: @game-scr-nav-iconset-border;

						background-color: #FFF;
						.border-radius( @game-scr-nav-iconset-a-size/2 + @game-scr-nav-iconset-border );

						&:hover, &.focus {
							background-color: #fcc;
								border-color: #FFF;
						}

						&.invert {
							background-position-y: 0;
							background-color: #c0392b;

							&:hover, &.focus {
								border-color: #FFF;
							}
						}

						&.icon01 {
							background-position-x: 0;
						}
						&.icon02 {
							background-position-x: -@game-scr-nav-iconset-a-size;
						}
						&.icon03 {
							background-position-x: -@game-scr-nav-iconset-a-size*2;
						}
						&.icon04 {
							background-position-x: -@game-scr-nav-iconset-a-size*3;
						}
						&.icon05 {
							background-position-x: -@game-scr-nav-iconset-a-size*4;
						}
						&.icon06 {
							background-position-x: -@game-scr-nav-iconset-a-size*5;
						}
						&.icon07 {
							background-position-x: -@game-scr-nav-iconset-a-size*6;
						}
						&.icon08 {
							background-position-x: -@game-scr-nav-iconset-a-size*7;
						}
						&.icon09 {
							background-position-x: -@game-scr-nav-iconset-a-size*8;
						}
					}

				}
			}

		}

	}
}

///////////////////////////////////////////////
// Progress Screen
///////////////////////////////////////////////

.elastic-transition() {
	-webkit-transition: all 500ms cubic-bezier(0.515, 0, 1.000, 0); /* older webkit */
	-webkit-transition: all 500ms cubic-bezier(0.515, -0.155, 1.000, -0.340); 
	   -moz-transition: all 500ms cubic-bezier(0.515, -0.155, 1.000, -0.340); 
	     -o-transition: all 500ms cubic-bezier(0.515, -0.155, 1.000, -0.340); 
	        transition: all 500ms cubic-bezier(0.515, -0.155, 1.000, -0.340); /* custom */
}

.screen.progress {

	background-color: rgba(0,0,0,0.6);

	&.hidden {
		div.logo {
			top: -400px;
		}
		div.bar-status, div.bar-progress, div.bar {
			top: 150%;
		}
	}

	div.logo {
		.elastic-transition();
		position: absolute;
		left: 50%; top: 40%;
		width: 400px;
		height: 400px;
		margin: -200px 0 0 -200px;
		background: url(../img/logo.png) no-repeat center center;
	}

	div.bar-status, div.bar-progress {
		.elastic-transition();
		position: absolute;
		top: 80%;
		margin-top: -24px;
		font-family: Tahoma, Arial;
		font-size: 12px;
		color: #999;
	}

	div.bar-status {
		left: 10px; 
	}
	div.bar-progress {
		right: 10px; 
	}

	div.bar {
		.elastic-transition();
		position: absolute;
		background-color: #eee;

		left: 0; top: 80%;
		width: 100%;
		height: 4px;

		.bar-value {
			.box-shadow( 0px 0px 10px 1px #FF9900 );
			background-color: #FF9900;
			display: block;
			margin: 1px 0;
			height: 2px;
			width: 0;
		}
	}
	
}

///////////////////////////////////////////////
// Running screen
///////////////////////////////////////////////

.screen.running {

	div.c-marker {
		position: absolute;		
		border: dashed 1px #999;

		.label {
			position: absolute;
			font-size: 12px;
			color: #999;
			left: 0; width: 100%;
			text-align: center;
			bottom: -16px;
		}
	}

	//
	// Tag-like buttons on page parts
	// --------------------------------
	//
	.pagepart {

		.btn-taglike {
			.transition( all 0.5s );
			.pointer-events( auto );
			.border-radius( 0px 0px 8px 8px );
			position: absolute;
			cursor: pointer;
			background-color: #d35400;
			text-align: center;
			color: #FFF;
			width: 70px;
			height: 45px;
			padding-top: 5px;
		}

		&.run-tl .btn-taglike {
			left: 0; top: 145px;
			&:hover {
				padding-top: 15px;
			}				
		}

		&.run-tr .btn-taglike {
			right: 0; top: 145px;
			&:hover {
				padding-top: 15px;
			}				
		}

		&.run-bl .btn-taglike {
			.border-radius( 8px 8px 0px 0px );
			left: 0; top: -50px;
			&:hover {
				top: -60px;
				padding-bottom: 10px;
			}				
		}

	}

	.globe {
		position: absolute;		
		.transition(all 0.4s);
		display: block;
		width: 160px;
		height: 160px;
		z-index: 70;
	}

	.progress-widget {
		position: absolute;		
		.transition(all 0.4s);
		.border-radius(200px);
		display: block;
		width: 200px; height: 200px;
		border: solid 2px #95A5A6;

		background: #bfbfbf; /* Old browsers */
		background: -moz-radial-gradient(center, ellipse cover, #bfbfbf 0%, #ffffff 100%); /* FF3.6+ */
		background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#bfbfbf), color-stop(100%,#ffffff)); /* Chrome,Safari4+ */
		background: -webkit-radial-gradient(center, ellipse cover, #bfbfbf 0%,#ffffff 100%); /* Chrome10+,Safari5.1+ */
		background: -o-radial-gradient(center, ellipse cover, #bfbfbf 0%,#ffffff 100%); /* Opera 12+ */
		background: -ms-radial-gradient(center, ellipse cover, #bfbfbf 0%,#ffffff 100%); /* IE10+ */
		background: radial-gradient(ellipse at center, #bfbfbf 0%,#ffffff 100%); /* W3C */
		filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#bfbfbf', endColorstr='#ffffff',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */

		a.button {
			position: absolute;		
			z-index: 71;
			.transition(all 0.4s);

			width: 108px; height: 52px;
			cursor: pointer;
			overflow: hidden;
			left: 45px;
			top: -35px;

			div {
				position: absolute;		
				width: 108px; height: 52px;
				color: #FFFFFF;
				line-height: 52px;
				text-decoration: none;
				text-align: center;
				font-size: 18px;
				cursor: pointer;
			}

			&:before {
				position: absolute;		
				left: 0; top: 0;
				position: absolute;
				display: block;
				content: " ";

				background: #c0392b;
				.transform( rotateZ(180deg) );
				.mask-image( url(../img/mask-tune.png) );
				width: 108px; height: 52px;
			}

			&:hover {
				position: absolute;		
				&:before {
					background-color: #e74c3c;
				}
			}

		}

		.knob {
			position: absolute;		
			left: 6px;
			top: 7px;
			z-index: 60;

			input {
				display: none;
			}

			&.blur {
				.filter( blur(5px) );
				z-index: 59;
			}
		}

	}

}
